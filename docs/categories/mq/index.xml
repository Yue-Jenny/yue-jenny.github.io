<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>MQ on Jenny blog</title>
        <link>https://yue-jenny.github.io/categories/mq/</link>
        <description>Recent content in MQ on Jenny blog</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>en-us</language>
        <lastBuildDate>Fri, 20 Jan 2023 13:38:08 +0800</lastBuildDate><atom:link href="https://yue-jenny.github.io/categories/mq/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>Kafka ç°¡ä»‹</title>
        <link>https://yue-jenny.github.io/2023/01/kafka-%E7%B0%A1%E4%BB%8B/</link>
        <pubDate>Fri, 20 Jan 2023 13:38:08 +0800</pubDate>
        
        <guid>https://yue-jenny.github.io/2023/01/kafka-%E7%B0%A1%E4%BB%8B/</guid>
        <description>&lt;h2 id=&#34;kafka&#34;&gt;Kafka&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;æœ€å…ˆæ˜¯ç”± LinkedIn å‰µç«‹çš„ä¸€æ¬¾åˆ†æ•£å¼è¨Šæ¯ç³»çµ± (distributed messaging system)ï¼Œç”± Scala å’Œ Java ç·¨å¯«çš„ open-source å°ˆæ¡ˆ&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;å‰è¨€&#34;&gt;å‰è¨€&lt;/h3&gt;
&lt;h3 id=&#34;prerequistites&#34;&gt;Prerequistites&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;../%e7%b3%bb%e7%b5%b1%e8%a8%ad%e8%a8%88%e5%9f%ba%e7%a4%8e%e5%9b%9b-publish/subscribe-pattern/&#34; &gt;Publish/Subscribe Pattern&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;-åŠŸèƒ½&#34;&gt;ğŸ“Œ åŠŸèƒ½&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é«˜æ•ˆèƒ½&lt;/strong&gt;ã€&lt;strong&gt;å®¹éŒ¯&lt;/strong&gt;ä¸”å…·&lt;strong&gt;å¯æ“´å±•æ€§&lt;/strong&gt;çš„å¹³å°&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç”¨æ–¼å»ºç½®&lt;strong&gt;å³æ™‚ä¸²æµè³‡æ–™ç®¡é“&lt;/strong&gt;ï¼Œä¸¦ä»¥ pub/sub pattern ä¾†ç®¡ç†ç”Ÿç”¢è€…èˆ‡æ¶ˆè²»è€…çš„è³‡æ–™&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Kafka Connect&lt;/strong&gt; æ˜¯ Apache Kafka çš„é–‹æ”¾åŸå§‹ç¢¼å…ƒä»¶ï¼Œæ˜¯ä¸€å€‹ç”¨æ–¼å°‡ Apache Kafka èˆ‡å¤–éƒ¨ç³»çµ± (å¦‚è³‡æ–™åº«ã€æ©Ÿç¢¼å€¼å­˜æ”¾å€ã€æœå°‹ç´¢å¼•å’Œæª”æ¡ˆç³»çµ±) é€£æ¥çš„æ¶æ§‹ã€‚&lt;/li&gt;
&lt;li&gt;ä¸²æµè³‡æ–™æ˜¯ä¸€ç¨®&lt;strong&gt;å°å‹è¨˜éŒ„æˆ–äº‹ä»¶&lt;/strong&gt; (è¨˜éŒ„æˆ–äº‹ä»¶é€šå¸¸ç‚ºå¹¾ KB å¤§å°çš„è¨˜éŒ„) çš„æŒçºŒä¸²æµï¼Œé€™é¡çš„è¨˜éŒ„å‰‡ç”±æ•¸åƒå°æ©Ÿå™¨ã€è£ç½®ã€ç¶²ç«™å’Œæ‡‰ç”¨ç¨‹å¼æ‰€ç”¢ç”Ÿã€‚ä¸²æµè³‡æ–™åŒ…å«å„å¼å„æ¨£çš„è³‡æ–™ï¼Œä¾‹å¦‚å®¢æˆ¶ä½¿ç”¨æ‚¨çš„è¡Œå‹•æˆ– Web æ‡‰ç”¨ç¨‹å¼ç”¢ç”Ÿçš„æ—¥èªŒæª”ã€é›»å­å•†å‹™æ¡è³¼ã€éŠæˆ²ä¸­çš„ç©å®¶æ´»å‹•ã€ä¾†è‡ªç¤¾äº¤ç¶²è·¯&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è³‡æ–™å–ç”¨çš„é †åºä»¥ &lt;strong&gt;FIFO (First In First Out)&lt;/strong&gt; ä½œç‚ºåŸå‰‡&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yue-jenny.github.io/2023/01/kafka-%E7%B0%A1%E4%BB%8B/FIFO.jpg&#34;
	width=&#34;428&#34;
	height=&#34;270&#34;
	srcset=&#34;https://yue-jenny.github.io/2023/01/kafka-%E7%B0%A1%E4%BB%8B/FIFO_hu1f9ef358d98fa79ae89d09bc8323061c_12585_480x0_resize_q75_box.jpg 480w, https://yue-jenny.github.io/2023/01/kafka-%E7%B0%A1%E4%BB%8B/FIFO_hu1f9ef358d98fa79ae89d09bc8323061c_12585_1024x0_resize_q75_box.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;First In First Out, source:https://en.wikipedia.org/wiki/FIFO_%28computing_and_electronics%29&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;158&#34;
		data-flex-basis=&#34;380px&#34;
	
&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æœ€é‡è¦çš„è§€å¿µ&#34;&gt;ğŸ’«æœ€é‡è¦çš„è§€å¿µğŸ’«&lt;/h3&gt;
&lt;p&gt;å¦‚ä½•é”åˆ°é«˜æ•ˆèƒ½ã€å®¹éŒ¯ä¸”å¯æ“´å±•çš„å‘¢?&lt;/p&gt;
&lt;h4 id=&#34;partition&#34;&gt;partition&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Partition æ˜¯æœ€å°çš„å­˜å„²å–®å…ƒ
&lt;img src=&#34;https://yue-jenny.github.io/2023/01/kafka-%E7%B0%A1%E4%BB%8B/01.png&#34;
	width=&#34;1080&#34;
	height=&#34;601&#34;
	srcset=&#34;https://yue-jenny.github.io/2023/01/kafka-%E7%B0%A1%E4%BB%8B/01_hu744ad90d8ee661de56063cb174dff7c8_235967_480x0_resize_box_3.png 480w, https://yue-jenny.github.io/2023/01/kafka-%E7%B0%A1%E4%BB%8B/01_hu744ad90d8ee661de56063cb174dff7c8_235967_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;179&#34;
		data-flex-basis=&#34;431px&#34;
	
&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¸€å€‹ Partition å…§éƒ¨æ¶ˆæ¯æœ‰åºï¼Œä¸€å€‹ Topic è·¨ Partition æ˜¯ç„¡åºçš„ã€‚
&lt;img src=&#34;https://yue-jenny.github.io/2023/01/kafka-%E7%B0%A1%E4%BB%8B/02.png&#34;
	width=&#34;1080&#34;
	height=&#34;520&#34;
	srcset=&#34;https://yue-jenny.github.io/2023/01/kafka-%E7%B0%A1%E4%BB%8B/02_hu3284de12ac4cff1966242054d24b6a5c_728647_480x0_resize_box_3.png 480w, https://yue-jenny.github.io/2023/01/kafka-%E7%B0%A1%E4%BB%8B/02_hu3284de12ac4cff1966242054d24b6a5c_728647_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;207&#34;
		data-flex-basis=&#34;498px&#34;
	
&gt;
&lt;img src=&#34;https://yue-jenny.github.io/2023/01/kafka-%E7%B0%A1%E4%BB%8B/03.png&#34;
	width=&#34;698&#34;
	height=&#34;590&#34;
	srcset=&#34;https://yue-jenny.github.io/2023/01/kafka-%E7%B0%A1%E4%BB%8B/03_hub073a7a655e622b4ac85bdd1cd9c7c48_210484_480x0_resize_box_3.png 480w, https://yue-jenny.github.io/2023/01/kafka-%E7%B0%A1%E4%BB%8B/03_hub073a7a655e622b4ac85bdd1cd9c7c48_210484_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;118&#34;
		data-flex-basis=&#34;283px&#34;
	
&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¸€å€‹ Kafka clusterç”±å¤šå€‹ Brokerï¼ˆå°±æ˜¯ Serverï¼‰ æ§‹æˆï¼Œæ¯å€‹ Broker ä¸­å«æœ‰ cluster çš„éƒ¨åˆ†æ•¸æ“šã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Partition åˆ†ä½ˆåœ¨å¤šå€‹ Broker çš„è©±ï¼ŒConsumer çš„å¤šå€‹å¯¦ä¾‹å°±å¯ä»¥é€£æ¥ä¸åŒçš„ Broker&lt;/li&gt;
&lt;li&gt;å¥½è™•
&lt;ul&gt;
&lt;li&gt;Topic å°±å¯ä»¥æ°´å¹³æ“´å±•&lt;/li&gt;
&lt;li&gt;æ”¯æŒæ›´å¤šçš„ Consumer&lt;/li&gt;
&lt;li&gt;ä¸€å€‹ Consumer å¯¦ä¾‹è² è²¬ä¸€å€‹ Partition
&lt;img src=&#34;https://yue-jenny.github.io/2023/01/kafka-%E7%B0%A1%E4%BB%8B/04.png&#34;
	width=&#34;1080&#34;
	height=&#34;588&#34;
	srcset=&#34;https://yue-jenny.github.io/2023/01/kafka-%E7%B0%A1%E4%BB%8B/04_hu9df9c2d8a44e24fac982d8c6b378c6b4_463876_480x0_resize_box_3.png 480w, https://yue-jenny.github.io/2023/01/kafka-%E7%B0%A1%E4%BB%8B/04_hu9df9c2d8a44e24fac982d8c6b378c6b4_463876_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;183&#34;
		data-flex-basis=&#34;440px&#34;
	
&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ•¸æ“šå†—é¤˜&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸€å€‹ Partition ç”Ÿæˆå¤šå€‹å‰¯æœ¬ï¼Œä¸¦ä¸”æŠŠå®ƒå€‘åˆ†æ•£åœ¨ä¸åŒçš„ Brokerã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœä¸€å€‹ Broker æ•…éšœäº†ï¼ŒConsumer å¯ä»¥åœ¨å…¶ä»– Broker ä¸Šæ‰¾åˆ° Partition çš„å‰¯æœ¬ï¼Œç¹¼çºŒç²å–æ¶ˆæ¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¯«å…¥ Partition çš„æ–¹å¼&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;çµ¦ Kafka æ±ºå®š
&lt;ul&gt;
&lt;li&gt;è‹¥æ²’æœ‰ key å‰‡ kafka ä»¥ round robin æ–¹å¼å°‡è¨Šæ¯å¯«å…¥ partitionï¼Œä½†é€™æ¨£å°±ä¸ä¿è­‰é †åºæ€§äº†ï¼Œè‹¥éœ€è¦æœ‰é †åºæ€§ï¼Œè«‹åƒè€ƒä¸‹é¢ä¸€å€‹æ–¹å¼
&lt;img src=&#34;https://yue-jenny.github.io/2023/01/kafka-%E7%B0%A1%E4%BB%8B/05.png&#34;
	width=&#34;847&#34;
	height=&#34;614&#34;
	srcset=&#34;https://yue-jenny.github.io/2023/01/kafka-%E7%B0%A1%E4%BB%8B/05_hu7adb8fef5a4461cb66826d8f5528082e_158389_480x0_resize_box_3.png 480w, https://yue-jenny.github.io/2023/01/kafka-%E7%B0%A1%E4%BB%8B/05_hu7adb8fef5a4461cb66826d8f5528082e_158389_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;137&#34;
		data-flex-basis=&#34;331px&#34;
	
&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ Partition Key å¯«å…¥ç‰¹å®š Partition
&lt;ul&gt;
&lt;li&gt;kafka ä¿è­‰ä½¿ç”¨ç›¸åŒçš„ key æœƒå°‡è¨Šæ¯æ”¾åˆ°åŒä¸€å€‹ partitionï¼Œä¸¦ä¸”ä¿è­‰é †åºæ€§ ( in order )&lt;/li&gt;
&lt;li&gt;èˆ‰ä¾‹ï¼Œå¦‚æœç›¸åŒå®¢æˆ¶çš„è³‡è¨Šæœ‰åºåœ°å–å¾—ï¼Œè¡¨ç¤ºéœ€è¦æ”¾åœ¨åŒä¸€å€‹ partitionï¼Œå¯ä»¥ä½¿ç”¨ customer id ä½œç‚º partition keyï¼Œé€™æ¨£åŒä¸€å€‹ customer çš„è³‡æ–™éƒ½æœƒæ”¾åˆ°åŒä¸€å€‹ partition
&lt;img src=&#34;https://yue-jenny.github.io/2023/01/kafka-%E7%B0%A1%E4%BB%8B/06.png&#34;
	width=&#34;827&#34;
	height=&#34;622&#34;
	srcset=&#34;https://yue-jenny.github.io/2023/01/kafka-%E7%B0%A1%E4%BB%8B/06_huae17a34b446bfa39d9899ec7a7d45732_138399_480x0_resize_box_3.png 480w, https://yue-jenny.github.io/2023/01/kafka-%E7%B0%A1%E4%BB%8B/06_huae17a34b446bfa39d9899ec7a7d45732_138399_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;132&#34;
		data-flex-basis=&#34;319px&#34;
	
&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è®€å– partition
&lt;img src=&#34;https://yue-jenny.github.io/2023/01/kafka-%E7%B0%A1%E4%BB%8B/07.png&#34;
	width=&#34;1368&#34;
	height=&#34;751&#34;
	srcset=&#34;https://yue-jenny.github.io/2023/01/kafka-%E7%B0%A1%E4%BB%8B/07_hud5080fe6ac86749543c5228e1a603204_275585_480x0_resize_box_3.png 480w, https://yue-jenny.github.io/2023/01/kafka-%E7%B0%A1%E4%BB%8B/07_hud5080fe6ac86749543c5228e1a603204_275585_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;182&#34;
		data-flex-basis=&#34;437px&#34;
	
&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;consumer group
&lt;ul&gt;
&lt;li&gt;å¤šå€‹ consumer çµ„åˆæˆä¸€å€‹ consumer groupï¼Œç›®çš„æ˜¯ç‚ºäº†&lt;strong&gt;æ°´å¹³æ“´å±•(scale out)&lt;/strong&gt; consumer&lt;/li&gt;
&lt;li&gt;æ±ºå®š consumer group è¦å¾å“ªè£¡é–‹å§‹è®€å–è³‡æ–™çš„é—œéµæ˜¯ consumer offsets
&lt;ul&gt;
&lt;li&gt;offsets æœƒè¢«å­˜åœ¨ topic name ä¸­&lt;/li&gt;
&lt;li&gt;å¦‚æœ consumer è®€å–è³‡æ–™å®Œç•¢ï¼Œå‰‡æœƒ commit offsets
&lt;img src=&#34;https://yue-jenny.github.io/2023/01/kafka-%E7%B0%A1%E4%BB%8B/08.png&#34;
	width=&#34;519&#34;
	height=&#34;250&#34;
	srcset=&#34;https://yue-jenny.github.io/2023/01/kafka-%E7%B0%A1%E4%BB%8B/08_hu37fa375a3ca6eee0640a804803663223_19691_480x0_resize_box_3.png 480w, https://yue-jenny.github.io/2023/01/kafka-%E7%B0%A1%E4%BB%8B/08_hu37fa375a3ca6eee0640a804803663223_19691_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;207&#34;
		data-flex-basis=&#34;498px&#34;
	
&gt;
&lt;img src=&#34;https://yue-jenny.github.io/2023/01/kafka-%E7%B0%A1%E4%BB%8B/09.png&#34;
	width=&#34;1261&#34;
	height=&#34;615&#34;
	srcset=&#34;https://yue-jenny.github.io/2023/01/kafka-%E7%B0%A1%E4%BB%8B/09_hudf56ad857977013a5721689d05bf4b0e_359612_480x0_resize_box_3.png 480w, https://yue-jenny.github.io/2023/01/kafka-%E7%B0%A1%E4%BB%8B/09_hudf56ad857977013a5721689d05bf4b0e_359612_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;205&#34;
		data-flex-basis=&#34;492px&#34;
	
&gt;
&lt;img src=&#34;https://yue-jenny.github.io/2023/01/kafka-%E7%B0%A1%E4%BB%8B/10.png&#34;
	width=&#34;916&#34;
	height=&#34;214&#34;
	srcset=&#34;https://yue-jenny.github.io/2023/01/kafka-%E7%B0%A1%E4%BB%8B/10_hu37bf28b82deed242038d260af9cbaad5_71844_480x0_resize_box_3.png 480w, https://yue-jenny.github.io/2023/01/kafka-%E7%B0%A1%E4%BB%8B/10_hu37bf28b82deed242038d260af9cbaad5_71844_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;428&#34;
		data-flex-basis=&#34;1027px&#34;
	
&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;apache-zookeeper&#34;&gt;apache zookeeper&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;an open-source server which enables highly reliable distributed coordination&lt;/li&gt;
&lt;li&gt;é€šéå†—é¤˜æœå‹™å¯¦ç¾é«˜å¯ç”¨æ€§&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;åƒè€ƒè³‡æ–™-&#34;&gt;åƒè€ƒè³‡æ–™ ğŸ‘&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://youtu.be/y9BStKvVzSs&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Apache KafkaÂ® 101: Partitioning&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.readfog.com/a/1635090175644241920&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ç´°èªª Kafka Partition åˆ†å€&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.confluent.io/apache-kafka-vs-confluent/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Apache Kafka vs Confluent: Comparing Features &amp;amp; Capabilities&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://aws.amazon.com/tw/msk/faqs/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;å…¨å—ç®¡ Apache Kafka - Amazon MSK å¸¸è¦‹å•ç­”é›† - Amazon Web Services&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ğŸ€ æœ€å¾Œï¼Œè‹¥å–œæ­¡æˆ‘çš„åˆ†äº«ï¼Œå¯ä»¥å¹«æˆ‘æ‹æ‹æ‰‹ğŸ‘ï¼Œæ˜¯å°æˆ‘æœ€å¤§çš„é¼“å‹µ!âœ¨&lt;/strong&gt;&lt;/p&gt;
</description>
        </item>
        
    </channel>
</rss>
